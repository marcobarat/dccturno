<mvc:View xmlns:core="sap.ui.core" xmlns:mvc="sap.ui.core.mvc" xmlns:c="sap.ui.commons" xmlns="sap.m"
          xmlns:l="sap.ui.layout" xmlns:html="http://www.w3.org/1999/xhtml" xmlns:t="sap.ui.table"
          xmlns:cus="myapp.control"
          controllerName="myapp.controller.ManagePiano">
    <Page id="managePiano">
        <headerContent>
            <Button icon="sap-icon://log" press="onAddPress" text="Uscita"
                    ariaLabelledBy="exitButtonLabel"    />
        </headerContent>
        <content>
            <Button text="Conferma"
                    press="onMenu"
                    ariaDescribedBy="defaultButtonDescription genericButtonDescription"
                    width="100%">
                <layoutData>
                    <FlexItemData growFactor="1" />
                </layoutData>
            </Button>
            <TabContainer
                id="TabContainer">
                <items>
                    <TabContainerItem name="Pasta Corta">
                        <content>
                        <Table 
                            inset="false" items="{path: 'linea>/linee'}" class="sapUiSmallMarginEnd" id="managePianoTable">
                            <headerToolbar>
                            </headerToolbar>
                            <columns>
                                <Column
                                    width="12em">
                                    <Text text="Linea" />
                                </Column>
                            </columns>
                            <items>
                                <ColumnListItem>
                                    <cells>
                                        <VBox width="100%" height="100%" class="sfondobianco">
                                            <HBox width="100%" height="35%"  alignItems="Start">
                                                <VBox width="20%" height="100%" class="">
                                                    <cus:CustomButt text="{linea>linea}"
                                                            press="onPress"
                                                            width="100%"
                                                            class="fix_b"
                                                            state=""
                                                            customType="linea">
                                                            
                                                        <cus:layoutData>
                                                            <FlexItemData growFactor="1" />
                                                        </cus:layoutData>
                                                    </cus:CustomButt>
                                                    <Table 
                                                        items="{path: 'operatore>/Operator'}"
                                                        inset="false"
                                                        growing="true"
                                                        fixedLayout="false"
                                                        growingThreshold="{operatore>numeroOperatori}"
                                                        class="sapUiSmallMarginEnd borderb">
                                                        <columns>
                                                            <Column >
                                                                <Text text="Operatori" />
                                                            </Column>
                                                        </columns>
                                                        <items>
                                                            <ColumnListItem >
                                                                <cells>
                                                                    <Select items="{operatore>Operator}" width="100%">
                                                                        <core:Item key="{operatore>nome}" text="{operatore>nome} {operatore>cognome}" />
                                                                    </Select>
                                                                </cells>
                                                            </ColumnListItem>
                                                        </items>
                                                    </Table>    

                                                </VBox>
                    
                                                <VBox width="80%" height="100%">
                                                    <VBox height="20%" width="100%">
                                                        <HBox>
                                                            <VBox width="98%" >
                                                                <cus:NewProgressIndicator
                                                                    class="sapUiSmallMarginBottom largo"
                                                                    NewPercentValue="{linea>disp}"
                                                                    displayValue="{linea>disp}"
                                                                    showValue="true"
                                                                    state="None" />
                                                            </VBox>
                                                            <VBox width="" class="sapUiSmallMarginBegin">
                                                                <cus:CustomButt text=" "
                                                                        press="onPress"
                                                                        ariaDescribedBy="defaultButtonDescription genericButtonDescription"
                                                                        customType="graficoSPC"
                                                                        state="1"
                                                                        width="10%">
                                                                    <cus:layoutData>
                                                                        <FlexItemData growFactor="1" />
                                                                    </cus:layoutData>
                                                                </cus:CustomButt>
                                                            </VBox>
                                                        </HBox>
                                                    </VBox>
                                                    <VBox height="80%" width="100%">
                                                        <Table 
                                                            items="{linea>ProductCollection}"
                                                            inset="false"
                                                            growing="true"
                                                            fixedLayout="false"
                                                            growingThreshold="2"
                                                            class="sapUiSmallMarginEnd">
                                                            <columns>
                                                                <Column>
                                                                    <Text text="" />
                                                                </Column>
                                                                <Column>
                                                                    <Text text="Sequenza" />
                                                                </Column>
                                                                <Column>
                                                                    <Text text="Formato" />
                                                                </Column>
                                                                <Column>
                                                                    <Text text="Confezionamento" />
                                                                </Column>
                                                                <Column>
                                                                    <Text text="" />
                                                                </Column>
                                                                <Column>
                                                                    <Text text="Qli" />
                                                                </Column>
                                                                <Column>
                                                                    <Text text="Cartoni" />
                                                                </Column>
                                                                <Column
                                                                    hAlign="End">
                                                                    <Text text="Ore" />
                                                                </Column>
                                                            </columns>
                                                            <items>
                                                                <ColumnListItem>
                                                                    <cells>
                                                                        <cus:CustomButt text="" 
                                                                                customType="batch"
                                                                                state="1"
                                                                                press="handlePressOpenMenu" />
                                                                        <Text

                                                                            text="{linea>seq}" />
                                                                        <Select 
                                                                               showSecondaryValues= "true"
                                                                               items="{
                                                                            path: 'linea>Formati',
                                                                            sorter: {
                                                                                    path: 'formato',
                                                                                    group: true
                                                                                    }
                                                                            }"
                                                                         >
                                                                            <core:ListItem key="{linea>formato} {linea>materiale}" text="{linea>formato} {linea>materiale}" />
                                                                        </Select>
                                                                        <Select>
                                                                            <core:Item key="500gr" text="500gr" />
                                                                        </Select>
                                                                        <cus:CustomButt text=""
                                                                                        press="onPress"
                                                                                        state="2"
                                                                                        customType="confezionamento">
                                                                        </cus:CustomButt>
                                                                        <Text
                                                                            text="{linea>qli}" />
                                                                        <Text
                                                                            text="{linea>cart}" />
                                                                        <Text
                                                                            text="{linea>ore}" />
                                                                    </cells>
                                                                </ColumnListItem>
                                                            </items>
                                                        </Table>    
                                                    </VBox>
                                                </VBox>       
                                            </HBox>
                                        </VBox>
                                    </cells>
                                </ColumnListItem>
                            </items>
                        </Table>
                        </content>                    
                    </TabContainerItem>
                </items>
            </TabContainer>    
 
        </content>
    </Page>
</mvc:View>
