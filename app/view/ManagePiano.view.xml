<mvc:View xmlns:core="sap.ui.core" xmlns:mvc="sap.ui.core.mvc" xmlns:c="sap.ui.commons" xmlns="sap.m"
          xmlns:l="sap.ui.layout" xmlns:html="http://www.w3.org/1999/xhtml" xmlns:t="sap.ui.table"
          xmlns:cus="myapp.control"
          controllerName="myapp.controller.ManagePiano">
    <Page id="managePiano" class="colorPage" showHeader="false">
        <content>
            <VBox height="100%" width="100%">
<!--                <VBox height="5%" width="100%"/>-->
                <VBox height="5%" width="100%">
                    <HBox>
                        <VBox height="100%" width="6.2%"/>
                        <VBox height="100%" width="13.8%">
                            <Button text="Esci" press="onNavBack" width="100%" class="noFocus" />
                        </VBox>
                        <VBox height="100%" width="10%"/>
                        <VBox height="100%" width="40%">
                            <VBox alignItems="Center" height="50%" width="100%">
                                <Text id="Title"/>
                            </VBox>
                        </VBox>
                        <VBox height="100%" width="10%"/>
                        <VBox height="100%" width="13.8%">
                            <Button text="Conferma" press="onMenu" width="100%" class="noFocus"/>
                        </VBox>
                        <VBox height="100%" width="6.2%"/>
                    </HBox>
                </VBox>
                <VBox height="95%" width="100%">
                    <HBox>
                        <VBox height="100%" width="5%"/>
                        <VBox height="100%" width="90%">
                            <IconTabBar
                                id="ManageIconTabBar"
                                select="changeReparto"
                                applyContentPadding="true"
                                expandable="false"
                                items="{reparti>/ListaReparti}"
                                selectedKey="1"
                            >
                                <items>
                                    <IconTabFilter
                                        text="{reparti>Reparto}"
                                        key="{reparti>RepartoID}">
                                    </IconTabFilter>                  
                                </items>
                                <content>
                                    <Table 
                                        inset="false" items="{path: 'linea>/linee'}" class="sapUiSmallMarginEnd" id="managePianoTable">
                                        <columns>
                                            <Column
                                                width="12em">
                                            </Column>
                                        </columns>
                                        <items>
                                            <ColumnListItem class="noDelimitator">
                                                <cells>
                                                    <VBox width="100%" height="80%" class="sfondobianco">
                                                        <HBox width="100%" height="35%"  alignItems="Start">
                                                            <VBox width="20%" height="100%">
                                                                <VBox>
                                                                    <cus:CustomButt text="{linea>linea}"
                                                                                    press="onOpenStatoLinea"
                                                                                    width="100%"
                                                                                    class="fix_b noFocus"
                                                                                    state="{linea>statolinea}"
                                                                                    customType="linea">
                                                            
                                                                        <cus:layoutData>
                                                                            <FlexItemData growFactor="1" />
                                                                        </cus:layoutData>
                                                                    </cus:CustomButt>
                                                                </VBox>
                                                                <Table 
                                                                    showNoData="false"
                                                                    class="mysapMListTblNoBorders borderBoxRight sapMListTblHeader_b">
                                                                    <columns>
                                                                        <Column  hAlign="Center">
                                                                            <Text text="Operatori"/>
                                                                        </Column>
                                                                    </columns>
                                                                </Table>
                                                                <VBox class="borderBoxRight">
                                                                    <ScrollContainer vertical='true' height="155px">  
                                                                        <content>
                                                                            <Table 
                                                                                items="{path: 'operatore>/Operator'}"
                                                                                inset="false"
                                                                                growing="true"
                                                                                fixedLayout="false"
                                                                                class="sapUiSmallMarginEnd mysapMListTblNoBorders">
                                                                                <columns>
                                                                                    <Column  hAlign="Center">
                                                                                    </Column>
                                                                                </columns>
                                                                                <items>
                                                                                    <ColumnListItem class="noDelimitator sapMListTblCell_b sapMListTblCell_op">
                                                                                        <cells>
                                                                                            <ComboBox items="{operatore>Operator}" width="100%">
                                                                                                <core:Item key="{operatore>nome}" text="{operatore>nome} {operatore>cognome}" />
                                                                                            </ComboBox>
                                                                                        </cells>
                                                                                    </ColumnListItem>
                                                                                </items>
                                                                            </Table>    
                                                                        </content> 
                                                                    </ScrollContainer> 
                                                                </VBox>
                                                            </VBox>
              
                                                            <VBox width="80%" height="100%">
                                                                <VBox height="20%" width="100%">
                                                                    <HBox>
                                                                        <VBox width="90%" >
                                                                            <cus:NewProgressIndicator
                                                                                class="largo"
                                                                                percentValue="{= Number(${linea>avanzamento})}"
                                                                                displayValue="{linea>perc_avanzamento}"
                                                                                showValue="true"
                                                                                barColor="{linee>barColor}"
                                                                            />
                                                                        </VBox>
                                                                        <VBox width="10%">
                                                                            <cus:CustomButt icon="img/triangoloprova.png"
                                                                                            text="4"
                                                                                            press="onPress"
                                                                                            ariaDescribedBy="defaultButtonDescription genericButtonDescription"
                                                                                            customType="graficoSPC"
                                                                                            state="1"
                                                                                            width="80%"
                                                                                            class="sapUiSmallMarginBegin monobuttonSPC noFocus">
                                                                            </cus:CustomButt>
                                                                        </VBox>
                                                                    </HBox>
                                                                </VBox>
                                                                <VBox height="80%" width="100%">
                                                        
                                                                    <Table
                                                                        showNoData="false"
                                                                        inset="false"
                                                                        growing="true"
                                                                        fixedLayout="false"
                                                                        growingThreshold="2"
                                                                        class="sapUiSmallMarginEnd mysapMListTblNoBorders sapMListTblHeader_b scrollingbar" 
                                                                    >
                                                                        <columns>
                                                                            <Column width="5%" hAlign="Center">
                                                                                <Text text="" />
                                                                            </Column>
                                                                            <Column width="10%" hAlign="Center">
                                                                                <Text text="Sequenza" />
                                                                            </Column>
                                                                            <Column width="20%" hAlign="Center">
                                                                                <Text text="Formato" />
                                                                            </Column>
                                                                            <Column width="15%" hAlign="Center">
                                                                                <Text text="Confezionamento" />
                                                                            </Column>
                                                                            <Column width="15%">
                                                                                <Text text="" />
                                                                            </Column>
                                                                            <Column width="10%" hAlign="Center">
                                                                                <Text text="Qli" />
                                                                            </Column>
                                                                            <Column width="10%" hAlign="Center">
                                                                                <Text text="Cartoni" />
                                                                            </Column>
                                                                            <Column hAlign="Center">
                                                                                <Text text="Ore" />
                                                                            </Column>
                                                                            <Column width="5%" hAlign="Center">
                                                                                <Text/>
                                                                            </Column>
                                                                        </columns>
                                                                    </Table>
                                                                    <ScrollContainer vertical='true' height="155px" class="scrollingbar">
                                                                        <content>
                                                                            <Table class="mysapMLIBShowSeparator mysapMListNoBorders1 mysapMListNoBorders2" 
                                                                                   width="100%" 
                                                                                   items="{linea>batchlist}">
                                                                                <columns>
                                                                                    <Column width="5%"  vAlign="Middle" hAlign="Center"/>
                                                                                    <Column width="10%" vAlign="Middle" hAlign="Center"/>
                                                                                    <Column width="20%" vAlign="Middle" hAlign="Center"/>
                                                                                    <Column width="15%" vAlign="Middle" hAlign="Center"/>
                                                                                    <Column width="15%" vAlign="Middle" hAlign="Center"/>
                                                                                    <Column width="10%" vAlign="Middle" hAlign="Center"/>
                                                                                    <Column width="10%" vAlign="Middle" hAlign="Center"/>
                                                                                    <Column  vAlign="Middle" hAlign="Center"/>
                                                                                    <Column  width="5%" vAlign="Middle" hAlign="Center"/>
                                                                                </columns>
                                                                                <items>
                                                                                    <ColumnListItem class="noDelimitator sapMListTblCell_b" height="90%">
                                                                                        <cells>
                                                                                            <cus:CustomButt 
                                                                                                            text="" 
                                                                                                            customType="batch"
                                                                                                            state="{linea>statoBatch}"
                                                                                                            press="handlePressOpenMenu" />
                                                                                            <Text
                                                                                                text="{linea>sequenza}" />
                                                                                            <ComboBox value="{linea>formatoProduttivo}" width="100%" loadItems="CaricaFormati" selectionChange="ResetConfezionamenti">
                                                                                                <!--<core:Item key="{linea>formato}" text="{linea>formato}"/>-->
                                                                                            </ComboBox>
                                                                                            <!--                                                                                                                                                                                <Select
                                                                                                selectedKey="{linea>formato} {linea>materiale}"
                                                                                                showSecondaryValues= "true"
                                                                                                items="{
                                                                                    path: 'linea>Formati',
                                                                                    sorter: {
                                                                                            path: 'formato',
                                                                                            group: true
                                                                                            }
                                                                                    }"
                                                                                            >
                                                                                                                                                                                    <core:ListItem key="{linea>formato} {linea>materiale}" text="{linea>formato} {linea>materiale}" />
                                                                                            </Select>-->
                                                                                            <ComboBox value="{linea>confezione} {linea>grammatura}gr" loadItems="CaricaConfezionamenti" selectionChange="loadDestinazione">
                                                                                                <!--<core:Item key="{linea>confezione}gr" text="{linea>confezione}gr" />-->
                                                                                            </ComboBox>
                                                                                            <Button         width="90%"
                                                                                                            text="{linea>destinazione}"
                                                                                                            press="visuBatch"
                                                                                                            >
                                                                                            </Button>
                                                                                            <Button visible="false" press="confermaCreazioneBatch">
                                                                                                
                                                                                            </Button>
                                                                                        </cells>
                                                                                    </ColumnListItem>
                                                                                </items>                                                                                                                                
                                                                            </Table>
                                                                        </content>
                                                                    </ScrollContainer>  
                                                                </VBox>
                                                            </VBox>       
                                                        </HBox>
                                                    </VBox>
                                                </cells>
                                            </ColumnListItem>
                                        </items>
                                    </Table>
                                </content>  
                            </IconTabBar>   
                        </VBox>
                        <VBox height="100%" width="5%"/> 
                    </HBox>
                </VBox>
            </VBox>
        </content>
    </Page>
</mvc:View>